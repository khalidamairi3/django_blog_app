
{% extends 'base.html'%}
{% block content %}
    {%if post %}
       {%if post.pub_date%}
              <div class="date">
                {{post.pub_date}}
              </div>
            {% else %}
              {%if user.is_authenticated %}
                <a href="{% url 'publish_post' post.id %}"><i class="fas fa-pen-square"> publish</i></a>
              {%endif%}
        {%endif%}
              

      {%if user.is_authenticated %}
        <a class="black" href="{% url 'edit' post.id %}"><i class="far fa-edit"></i></a>
      {%endif%}

        <div class="post">

          <h1>{{post.title}}</h1>
          <p> {{post.text|linebreaksbr}}</p>
          {% if user.is_authenticated %}
          <button class="btn btn-secondary"> <a href="{% url 'add_comment' pk=post.id %}">Add Comment </a></button>
          {% endif %}
          {% for comment in post.comments.all %}
          
            <div class="comment"></div>
            
              <p class="date"> {{ comment.created_date}}</p>
              <a href="{% url 'comment_remove' pk=comment.pk %}"><i class="fas fa-trash-alt"></i></a>
              <strong>{{comment.author}}</strong>
              <p>{{comment.text|truncatechars:50}}</p>

              </div>

              {% empty %}
              <p>No comments </p>


            {% endfor %}

        </div>
    {%endif%}
{%endblock%}
